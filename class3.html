<!DOCTYPE html>

<!-- کد برای مکث در اجرا و جلوگیری از استاپ شدن و نمایش خطا در کد -->
<script>

    function heavyTask() {
        let sum = 0
        for (let i = 0; i < 2_000; i++) {
            for (let j = 0; j < 1_000; j++) {
                sum += i + j;
            }
        }
        console.log(sum);
    }
    console.log("Start");
    heavyTask();
    console.log("End");

    ////////////////////////////////////

    console.log("Start");
    function heavyTask() {
        return new Promise((resolve) => {
            let sum = 0
            for (let i = 0; i < 2_000; i++) {
                for (let j = 0; j < 1_000; j++) {
                    sum += i + j;
                }
            }
            resolve(sum);
        });
    }

    heavyTask().then(result => {
        console.log("sum" + result);
    })
    console.log("End");
    //////////////////////////////////////////////////////
    //promise
    const myPromise = new Promise((resolve, reject) => {
        const success = true;

        if (success) {
            resolve("عملیات موفق بود!");
        } else {
            reject("عملیات شکست خورد!");
        }
    });

    myPromise
        .then(result => {
            console.log("Success:", result);
        })
        .catch(err => {
            console.log("Error:", err);
        })
        .finally(() => {
            console.log("Finished!");
        });

    /////////////////////////////////////////////////////////////
    console.log("Start");

    fetch("https://jsonplaceholder.typicode.com/posts/1")
        .then(res => res.json())
        .then(data => console.log("Data:", data));

    console.log("End");
</script>